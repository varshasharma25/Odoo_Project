<!DOCTYPE html>
<html>
<head>
  <title>Leave Management</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
</head>
<body>

<script>
let role = localStorage.getItem("role");
if (!role) {
  window.location.href = "login.html";
}

function logout() {
  localStorage.clear();
  window.location.href = "login.html";
}
</script>

<nav class="navbar navbar-dark bg-dark">
  <span class="navbar-brand ms-3">Leave Management</span>
  <button class="btn btn-danger me-3" onclick="logout()">Logout</button>
</nav>

<div class="container mt-4">

  <!-- Employee Leave Form -->
  <div class="card p-4 w-50">
    <label>Leave Type</label>
    <select class="form-control mb-2">
      <option>Paid Leave</option>
      <option>Sick Leave</option>
      <option>Unpaid Leave</option>
    </select>

    <label>Date</label>
    <input type="date" class="form-control mb-2">

    <textarea class="form-control mb-2" placeholder="Reason"></textarea>

    <button class="btn btn-primary mt-2" onclick="applyLeave()">
      Apply Leave
    </button>

    <p class="mt-3 fw-bold" id="status"></p>
  </div>

  <!-- Admin Approval Panel -->
  <div id="adminPanel" class="mt-4"></div>

</div>

<script>
function applyLeave() {
  localStorage.setItem("leaveStatus", "Pending");
  document.getElementById("status").innerText =
    "Leave Status: Pending";
}

if (role === "admin") {
  document.getElementById("adminPanel").innerHTML = `
    <hr>
    <h4>Admin Approval Panel</h4>
    <p>Current Leave Status:
      <b>${localStorage.getItem("leaveStatus") || "No Request"}</b>
    </p>

    <button class="btn btn-success me-2" onclick="approveLeave()">
      Approve
    </button>
    <button class="btn btn-danger" onclick="rejectLeave()">
      Reject
    </button>
  `;
}

function approveLeave() {
  localStorage.setItem("leaveStatus", "Approved");
  alert("Leave Approved");
}

function rejectLeave() {
  localStorage.setItem("leaveStatus", "Rejected");
  alert("Leave Rejected");
}
</script>

</body>
</html>
